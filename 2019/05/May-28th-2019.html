<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Jordan Vidrine Coding Journal - May 28th 2019</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="stylesheet" href="/assets/css/page-styles.css">
    <link href="https://fonts.googleapis.com/css?family=Cabin:600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id='title-nav'>
      <h1>Coding Journal</h1>
      <nav>
  
  
    <a href="/" >
      Home
    </a>
    
  
    <a href="/blog" >
      Blog
    </a>
    
  
    <a href="https://www.linkedin.com/in/jordan-b-vidrine/" >
      LinkedIn
    </a>
    
</nav>

      <div id='bio'>
              <img src="/assets/img/profile.jpg">
        <h3>Jordan Vidrine</h3>
        <span>Daily Coding Journal</span>
        <p>
          An experienced business owner + musician with a demonstrated history of management in the
          Energy sector and an insatiable appetite for learning new and complex skills. Transitioning
          from an ownership role & seeking employment in Web Development as a Jr Full Stack Developer.
        </p>
      </div>
    </div>
    <div id="posts">
    <div id="content">
    <h2>May 28th 2019</h2>
    <p>After spending the morning organizing my ArtSpark project and putting together a project timeline with EVERYTHING I need to do, I was able to code without any distraction.</p>

<p>I will be getting back to the tank/graph offshore work this Thursday. Until then I am continuing my regularly scheduled learning.
<!--more--></p>

<p>I finished chapter 1 of this book <a href="https://teropa.info/build-your-own-angular/">Build Your Own Angular</a> as apart of the premium watch and code course I am finishing. The book is suggested reading, not to learn angular, but to learn javascript and the underlying JS in a complex framework so we can get a better grasp of all aspects of javascript.</p>

<p>After finishing, I started going through it one more time to solidify some of the things happening here like Classes, passing functions to classes, creating prototypes and constructor functions, and storing data in objects created with classes.</p>

<p>It is a pretty challenging read but at the same time very interesting. Through it I am also learning a lot about the Jasmine testing framework. With each new feature we implement in the book, we first write a test, then write the code to make that test pass.</p>

<p>I also looked into Open Source and am interested in getting some experience with this possibly through what Mozilla has to offer.</p>

<p>Here is some of the code I wrote today:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//TESTS</span>
<span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">Scope</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../src/scope</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Scope</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">can be constructed and used as an object</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">scope</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scope</span><span class="p">();</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">aProperty</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">aProperty</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">digest</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">scope</span><span class="p">;</span>

    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">scope</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scope</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">calls the listener function of a watch on first $digest</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">watchFn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">wat</span><span class="dl">'</span><span class="p">;};</span>
      <span class="kd">var</span> <span class="nx">listenerFn</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">();</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="nx">watchFn</span><span class="p">,</span><span class="nx">listenerFn</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">listenerFn</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">calls the watch function with the scope as the arguments</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">watchFn</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">listenerFn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">};</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="nx">watchFn</span><span class="p">,</span> <span class="nx">listenerFn</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">watchFn</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">calls the listener function when the watched value changes</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span><span class="p">},</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span><span class="p">;}</span>
      <span class="p">);</span>

      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">;</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">calls listener when watch value is first undefined</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span><span class="p">;},</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span><span class="p">;}</span>
      <span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">counter</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">calls listener with newValue as oldValue the first time it runs</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">oldValueGiven</span><span class="p">;</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">someValue</span><span class="p">;</span> <span class="p">},</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span><span class="nx">oldValueGiven</span> <span class="o">=</span> <span class="nx">oldValue</span><span class="p">;}</span>
      <span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">oldValueGiven</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>

    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">may have watchers that omit the listener function</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">watchFn</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">().</span><span class="nx">and</span><span class="p">.</span><span class="nx">returnValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">something</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="nx">watchFn</span><span class="p">);</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">watchFn</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">triggers chained watchers in the same digest</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">;</span>

      <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">nameUpper</span><span class="p">;</span> <span class="p">},</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">initial</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">);</span>

        <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span>
          <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">){</span><span class="k">return</span> <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span><span class="p">;},</span>
          <span class="kd">function</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">scope</span><span class="p">.</span><span class="nx">nameUpper</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">);</span>

        <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">initial</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">'</span><span class="s1">J.</span><span class="dl">'</span><span class="p">);</span>

        <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Bob</span><span class="dl">'</span><span class="p">;</span>
        <span class="nx">scope</span><span class="p">.</span><span class="nx">$digest</span><span class="p">();</span>
        <span class="nx">expect</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">initial</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">'</span><span class="s1">B.</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>

<span class="p">});</span>

</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'use strict';
var _ = require('lodash');

function Scope() {
  this.$$watchers = [];
}

function initWatchVal() {};

Scope.prototype.$watch = function(watchFn, listenerFn) {
  var watcher = {
    watchFn: watchFn,
    listenerFn: listenerFn || function(){},
    last: initWatchVal,
  }
  this.$$watchers.push(watcher)
}

Scope.prototype.$digest = function() {
  var self = this;
  _.forEach(this.$$watchers, function(watcher) {
    var newValue = watcher.watchFn(self);
    var oldValue = watcher.last;
    if (newValue !== oldValue) {
      watcher.last = newValue;
      watcher.listenerFn(newValue,
        (oldValue === initWatchVal ? newValue : oldValue),
        self);
    }
  });
}

module.exports = Scope;

</code></pre></div></div>

    <a id='back' href="/blog/index.html">Back to blog...</a>
  </div>
    </div>
    <footer>
<p>Created with Jekyll by Jordan Vidrine - <a href="https://www.linkedin.com/in/jordan-b-vidrine/">LinkedIn</a> - <a href="https://github.com/jordanvidrine">GitHub</a></p>
</footer>
</section>


  </body>
</html>
